# æ­£åˆ™è¡¨è¾¾å¼

[referance](https://blog.csdn.net/zhangzeyuaaa/article/details/50390333)  
[èœé¸Ÿæ•™ç¨‹](https://www.runoob.com/python/python-reg-expressions.html)
[æ­£åˆ™è¡¨è¾¾å¼ä½¿ç”¨æ€»ç»“](https://blog.csdn.net/JOJOY_tester/article/details/71156117)

## ä¸€ã€æ­£åˆ™è¡¨è¾¾å¼æ¦‚å¿µ
æ­£åˆ™è¡¨è¾¾å¼ï¼Œåˆç§°æ­£è§„è¡¨ç¤ºæ³•ã€å¸¸è§„è¡¨ç¤ºæ³•ï¼ˆè‹±è¯­ï¼šRegular Expressionï¼Œåœ¨ä»£ç ä¸­å¸¸ç®€å†™ä¸ºregexã€regexpæˆ–REï¼‰ï¼Œè®¡ç®—æœºç§‘å­¦çš„ä¸€ä¸ªæ¦‚å¿µã€‚æ­£åˆ™è¡¨è¾¾å¼ä½¿ç”¨å•ä¸ªå­—ç¬¦ä¸²æ¥æè¿°ã€åŒ¹é…ä¸€ç³»åˆ—ç¬¦åˆæŸä¸ªå¥æ³•è§„åˆ™çš„å­—ç¬¦ä¸²ã€‚  
ï¼ˆä¸€ï¼‰æ˜¯ä»€ä¹ˆï¼š  
* æ˜¯ä¸€ä¸ªé€šç”¨çš„å­—ç¬¦ä¸²è¡¨è¾¾æ¡†æ¶
* æ˜¯ç®€æ´è¡¨å•è¡¨è¾¾ä¸€ç»„å­—ç¬¦ä¸²çš„è¡¨è¾¾å¼
* é’ˆå¯¹å­—ç¬¦ä¸²è¡¨è¾¾â€œç®€æ´â€å’Œâ€œç‰¹å¾â€æ€æƒ³å·¥å…·
* åˆ¤æ–­æŸå­—ç¬¦ä¸²çš„ç‰¹å¾å½’å±  

ï¼ˆäºŒï¼‰æœ‰ä»€ä¹ˆç”¨ï¼š
* è¡¨è¾¾æ–‡æœ¬ç±»å‹çš„ç‰¹å¾ï¼ˆç—…æ¯’/å…¥ä¾µç­‰ï¼‰
* åŒæ—¶æŸ¥æ‰¾æˆ–æ›¿æ¢ä¸€ç»„å­—ç¬¦ä¸²
* åŒ¹é…å­—ç¬¦ä¸²çš„å…¨éƒ¨æˆ–éƒ¨åˆ†â˜…  

ï¼ˆä¸‰ï¼‰æ€ä¹ˆä½¿ç”¨ï¼š  
**ç¼–è¯‘ï¼šå°†ç¬¦åˆæ­£åˆ™è¡¨è¾¾å¼è¯­æ³•çš„å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ­£åˆ™è¡¨è¾¾å¼ç‰¹å¾**  
> å°†æ­£åˆ™è¡¨è¾¾å¼å­—ç¬¦ä¸²èµ‹ç»™regexï¼š  
> regex='P(Y|YT|YTH|YTHO|?N)'  
> 
> ä½¿ç”¨reåº“çš„compileæ–¹æ³•ç¼–è¯‘,å°†ä¸€ä¸ªå­—ç¬¦ä¸²å˜æˆä¸€ä¸ªç‰¹å¾ï¼Œè€Œè¿™ä¸ªç‰¹å¾å¯ä»¥è¡¨è¾¾ä¸€ç»„å­—ç¬¦ä¸²ï¼š  
> p=re.compile(regex)  
> 
> å¯ä»¥è¡¨è¾¾ï¼š  
> 'PN'  
> 'PYN'  
> 'PYTN'  
> 'PYTHN'  
> 'PYTHON'  

## äºŒã€æ­£åˆ™è¡¨è¾¾å¼è¯­æ³•ï¼ˆç”±å­—ç¬¦å’Œæ“ä½œç¬¦æ„æˆï¼‰

### ï¼ˆä¸€ï¼‰æ­£åˆ™è¡¨è¾¾å¼çš„å¸¸ç”¨æ“ä½œç¬¦ï¼š
![æ­£åˆ™è¡¨è¾¾å¼çš„å¸¸ç”¨æ“ä½œç¬¦1](https://img-blog.csdn.net/20170323202311025)  
![æ­£åˆ™è¡¨è¾¾å¼çš„å¸¸ç”¨æ“ä½œç¬¦2](https://img-blog.csdn.net/20170323204916037)

#### 1.æ­£åˆ™è¡¨è¾¾å¼è¯­æ³•å¸¸è§„å®ä¾‹ï¼š  
```python
P(Y|YT|YTH|YTHO)?N    "PN","PYN","PYTN","PYTHN","PYTHON"
PYTHON+               "PYTHON","PYTHONN","PYTHONNN..."
PY[TH]ON              "PYTON","PYHON"
PY[^TH]?ON            "PYON","PYAON","PYXON"
PY{:3}N               "PN","PYN","PYYN","PYYYN"   # è¡¨ç¤ºæ‰©å±•å‰ä¸€ä¸ªå­—ç¬¦0åˆ°3æ¬¡ï¼Œå«3æ¬¡
```
#### 2.æ­£åˆ™è¡¨è¾¾å¼è¯­æ³•ç»å…¸å®ä¾‹ï¼š  
```python
(cc)*                é‡å¤ä»»æ„å¶æ¬¡æ•°çš„c
^[A-Za-z]+$          ç”±26ä¸ªå­—æ¯ç»„æˆçš„å­—ç¬¦ä¸²
^[A-Za-z0-9]+$       ç”±26ä¸ªå­—æ¯å’Œæ•°å­—ç»„æˆçš„å­—ç¬¦ä¸²
^-?\d+$              æ•´æ•°å½¢å¼çš„å­—ç¬¦ä¸²
^[0-9]*[1-9][0-9]*$  æ­£æ•´æ•°å½¢å¼çš„å­—ç¬¦ä¸²
[1-9]\d{5}           ä¸­å›½å¢ƒå†…é‚®æ”¿ç¼–ç ï¼Œ6ä½
[\u4e00-\u9fa5]      åŒ¹é…ä¸­æ–‡å­—ç¬¦  #é‡‡ç”¨utf8ç¼–ç çº¦å®šä¸­æ–‡å­—ç¬¦å–å€¼èŒƒå›´
\d{3}-\d{8}|\d{4}-\d{7}  å›½å†…ç”µè¯å·ç ï¼Œ010-68913536  11ä½å•Š
```

#### 3.åŒ¹é…IPåœ°å€çš„æ­£åˆ™è¡¨è¾¾å¼ï¼š  
ï¼ˆIPåœ°å€åˆ†4æ®µï¼Œæ¯æ®µæ˜¯0-255ï¼‰  
0~255çš„èŒƒå›´ç”±å››æ®µæ„æˆï¼šåˆ†åˆ«ä¸ºï¼š  
`0-99ï¼š        [1-9]?\d`  
`100-199ï¼š     1\d{2}`  
`200-249ï¼š     2[0-4]\d`  
`250-255ï¼š     25[0-5]`

åˆ™ipåœ°å€ä¸ºï¼š  
`(([1-9]?\d|1\d{2}|2[0-4]\d|25[0-5]).){3}([1-9]?\d|1\d{2}|2[0-4]\d|25[0-5])`


## ä¸‰ã€æ­£åˆ™è¡¨è¾¾å¼å’Œbs4ç»“åˆå®æ“ï¼š

```python
#!/usr/bin/env python3
#-*-coding:utf-8-*-

import re
from fake_useragent import UserAgent
import requests
from bs4 import BeautifulSoup
url='http://www.pythonscraping.com/pages/page3.html'

ua=UserAgent()
kv={'user-agent':ua.random}


try:
    r=requests.get(url,timeout=30,headers=kv)
    print(r.status_code)
    r.raise_for_status()
    r.encoding=r.apparent_encoding
    demo=r.text
except:
    print('something is error!!!ğŸ˜±')
else:
    soup=BeautifulSoup(demo,'html.parser')
    print('----------------------------------------------------------------')
    images=soup.find_all('img',{'src':re.compile(r'\.\./img/gifts/img.\.jpg')})   #è¿™é‡Œå°†æ­£åˆ™è¡¨è¾¾å¼å’Œfind_all()å‡½æ•°é…åˆä½¿ç”¨
    for image in images:
        print(image['src'])   # è¿­ä»£æ‰“å°imageæ ‡ç­¾ä¸­çš„srcå±æ€§çš„å†…å®¹

'''
# Output:
200
----------------------------------------------------------------
../img/gifts/img1.jpg
../img/gifts/img2.jpg
../img/gifts/img3.jpg
../img/gifts/img4.jpg
../img/gifts/img6.jpg
'''
```