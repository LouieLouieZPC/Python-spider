# Requests库7个主要方法解析

## 一、request方法：

__格式：__
`request.request(method,url,**kwargs)`


> r = requests.request(method='GET', url=url, **kwargs)  
> r = requests.get(url, **kwargs)  
> PS：上面的方法和下面的方法达到的效果是一样的，就是做了一层封装，把比较常用的方法都抽出来,  

* `method`:请求方式，对应HTTP协议请求方法get/put/post等7种请求方法，例如：request.request('GET',url,**kwargs) ，（Requests库的方法为小写，而HTTP协议请求方法为大写）
* `url`：拟获取页面的URL链接
* `**kwargs`：控制访问参数，共13个:
  - `params`:字典或字节序列(字符串)，作为参数增加至URL中(搭配get)
  - `data`:字典(被放进form)或字节序列(字符串)（被放进data）或文件对象，作为Request的内容text（搭配put）
  - `json`:JSON格式的数据，作为Request的内容text（json格式，其实就是字符串）（搭配post）
  - `headers`:字典，HTTP定制头部，隐藏爬虫信息，模拟浏览器的头部信息（搭配post）
  - `cookies`:字典或CookieJar,Request中的cookie（搭配post）
  - `auth`: 元祖，支持HTTP认证功能
  - `files`: 字典类型，传输文件
  - `timeout`: 设定超时时间，秒为单位
  - `proxies`: 字典类型，设定访问代理服务器，可以增加登录认证
  - `allow_redirects`: True/False,默认为True,重定向开关  
  - `stream`: True/False，默认为True,获取内容立即下载开关
  - `verity`: True/False默认Ture,认证ssl证书开关
  - `cert`: 本地ssl证书路径

### （一）e.g.:`params`介绍
```python
import requests


kv={'key1':'value1','key2':'value2'}

r=requests.request('GET','http://python123.io/ws',params=kv)   
print(r.url)


# Output:
https://python123.io/ws?key1=value1&key2=value2
```



### （二）e.g.:`date`介绍
```python
import requests

kv={'key1':'value1','key2':'value2'}

r=requests.request('PUT','http://httpbin.org/put',data=kv)   
print(r.status_code)
print(r.text)


# Output:
200
{
  "args": {},
  "data": "",
  "files": {},
  "form": {
    "key1": "value1",
    "key2": "value2"
  },
  "headers": {
    "Accept": "*/*",
    "Accept-Encoding": "gzip, deflate",
    "Content-Length": "23",
    "Content-Type": "application/x-www-form-urlencoded",
    "Host": "httpbin.org",
    "User-Agent": "python-requests/2.22.0",
    "X-Amzn-Trace-Id": "Root=1-5e4a8581-cb3c8890bd750450bacc8820"
  },
  "json": null,
  "origin": "218.72.109.87",
  "url": "http://httpbin.org/put"

}
```



###（三）e.g.:`headers`介绍
```python
In [58]: url = 'http://httpbin.org/post'

In [59]: r = requests.request('POST', url)

# 头部信息
In [69]: r.request.headers   # r.request.headers是请求头，而r.headers是响应头
# 观察User-Agent
Out[69]: {'Accept': '*/*', 'User-Agent': 'python-requests/2.13.0', 'Connection': 'keep-alive', 'Accept-Encoding': 'gzip, deflate', 'Content-Length': '0'}


#加入headers后
In [62]: headers = { # 浏览器代理
    ...:      "User-Agent": "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Ch
    ...: rome/57.0.2987.133 Safari/537.36"
    ...: }
In [63]: r = requests.request('POST', url, headers=headers)

In [71]: r.request.headers       # 查看请求头
Out[71]: {'Accept': '*/*', 'User-Agent': 'Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/57.0.2987.133 Safari/537.36', 'Connection': 'keep-alive', 'Accept-Encoding': 'gzip, deflate', 'Content-Length': '0'}
```





```

### e.g.3:
```python
import requests


kv={'user-agent':'Chrome/10'}

r=requests.request('POST','http://python123.io/ws',headers=kv)   # 模拟浏览器

```





